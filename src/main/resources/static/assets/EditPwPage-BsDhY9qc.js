import{u as B,r as p,a as D,j as e,L as $,g as k,S as u}from"./index-DLHo9G1O.js";import{o as A,c as F,a as w,b as I}from"./index.esm-SloHnBlm.js";import{a as f}from"./index-CHcUfME0.js";import{u as L}from"./index.esm-DzBEjBS5.js";import{I as T}from"./index-Secm_Y0z.js";import{L as E,H as R,C as z,F as O,T as P,I as h,S as x,Y as g,a as V}from"./loginStyle-DtPLaVfi.js";import{r as Y,U as q,S as H}from"./roleAtom-DmcA2hSe.js";import"./iconBase-7BRcTMO3.js";const Z=F({newUpw:w().required("비밀번호는 필수입니다.").min(8,"최소 8자 이상 작성해야 합니다.").max(16,"최대 16자까지 작성 가능합니다.").matches(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]+$/,"비밀번호는 영어, 숫자, 특수문자만 가능합니다."),pwConfirm:w().required("비밀번호 확인을 입력해주세요.").oneOf([I("newUpw")],"비밀번호가 일치하지 않습니다.")});function X(){var m,d;const i=B(),[j,C]=p.useState(!1),r=D(Y),{register:a,handleSubmit:S,formState:{errors:n},watch:c}=L({mode:"onChange",resolver:A(Z)}),v=async o=>{try{const s=k();console.log(s),r===q?(await f.put("/api/user/upw",o,{headers:{Authorization:`Bearer ${s}`}}),u.fire({title:"비밀번호가 변경 되었습니다.",icon:"success",confirmButtonText:"확인",showConfirmButton:!0,allowOutsideClick:!1}).then(t=>{t.isConfirmed&&i("/user")})):r===H&&(await f.put("/api/admin/upw",o,{headers:{Authorization:`Bearer ${s}`}}),u.fire({title:"비밀번호가 변경 되었습니다.",icon:"success",confirmButtonText:"확인",showConfirmButton:!0,allowOutsideClick:!1}).then(t=>{t.isConfirmed&&i("/store")}))}catch(s){console.log(s)}},y=o=>{C(s=>!s),v({newUpw:o.newUpw})},U=c("newUpw"),b=c("pwConfirm"),l=U&&b;return p.useEffect(()=>{console.log(r)},[]),e.jsxs("div",{children:[e.jsxs(E,{style:{position:"relative"},children:[e.jsx(R,{children:e.jsx(z,{children:e.jsx(T,{style:{width:"100%",height:"100%",cursor:"pointer"},onClick:()=>i(-1)})})}),e.jsx(O,{children:e.jsxs("form",{onSubmit:S(y),children:[e.jsx(P,{children:"비밀번호 변경"}),e.jsxs(h,{children:[e.jsx(x,{type:"password",placeholder:"새 비밀번호",...a("newUpw")}),e.jsx(g,{children:(m=n.newUpw)==null?void 0:m.message})]}),e.jsxs(h,{children:[e.jsx(x,{type:"password",placeholder:"새 비밀번호 확인",...a("pwConfirm")}),e.jsx(g,{children:(d=n.pwConfirm)==null?void 0:d.message})]}),e.jsx("div",{style:{marginLeft:20,marginRight:20},children:e.jsx(V,{type:"submit",style:{backgroundColor:l?"#6F4CDB":"#ddd"},disabled:!l,children:"확인"})})]})})]}),j&&e.jsx($,{})]})}export{X as default};
