import{u as T,R as d,l as F,i as E,b as U,r as u,a as A,j as s,s as H}from"./index-DgvhuQLs.js";import{a as x}from"./index-CHcUfME0.js";import{u as _}from"./index.esm-ADTgdix5.js";import{a as N}from"./index-Bonc72oP.js";import{r as B,U as m,S as l}from"./roleAtom-JDXEFqt3.js";import{L as V,H as M,C as O,T as P,b as Y,R as q,F as z,I as f,S as j,a as G,c as i}from"./loginStyle-wkVDl0VW.js";import{s as S}from"./cookie-BNspsx3t.js";import"./iconBase-BvS4BhiP.js";import"./emotion-styled.browser.esm-BHLZPLA4.js";function ns(){const n=T(),[J,p]=d(F),[K,y]=d(E),[Q,b]=d(U),[t,g]=u.useState({id:"",pw:""}),[h,I]=u.useState(!1),D=sessionStorage.getItem("userId"),w=sessionStorage.getItem("restaurantId"),{handleSubmit:v}=_(),a=A(B),L=()=>{a===m?n("/user"):a===l&&n("/store")},C=async()=>{try{if(a===m){const e=(await x.post("/api/user/sign-in",t)).data.resultData;b({companyId:e.companyId,companyName:e.companyName,email:e.email,name:e.name,phone:e.phone,pic:e.pic,point:e.point,roleId:e.roleId,uid:e.uid,userId:e.userId}),console.log(e);const r=e.userId||D,c=e.accessToken;window.sessionStorage.setItem("userId",r),S(c),p(!0)}else if(a===l){const o=await x.post("/api/admin/sign-in",t);console.log(o.data.resultData);const e=o.data.resultData,r=e.restaurantId||w,c=e.adminId,k=e.accessToken;window.sessionStorage.setItem("adminId",c),window.sessionStorage.setItem("restaurantId",r),S(k),y(!0),H(r)}p(!0),L()}catch(o){alert("아이디와 비밀번호가 일치하지 않습니다."),console.log(o)}},R=()=>{C()};return u.useEffect(()=>{t.id&&t.pw?I(!0):I(!1)},[t]),s.jsxs(V,{children:[s.jsx(M,{children:s.jsx(O,{children:s.jsx(N,{style:{width:"100%",height:"100%",cursor:"pointer"},onClick:()=>n(-1)})})}),s.jsxs(P,{children:[s.jsx(Y,{src:"/logo.png",alt:"로고"}),s.jsx(q,{children:a===m?"사용자":a===l?"사장님":""})]}),s.jsx(z,{children:s.jsxs("form",{onSubmit:v(R),children:[s.jsx(f,{children:s.jsx(j,{type:"text",placeholder:"아이디",value:t.id,onChange:o=>g({...t,id:o.target.value})})}),s.jsx(f,{children:s.jsx(j,{type:"password",value:t.pw,placeholder:"비밀번호 (8-16자)",onChange:o=>g({...t,pw:o.target.value})})}),s.jsx("div",{style:{marginLeft:20,marginRight:20},children:s.jsx(G,{type:"submit",style:{backgroundColor:h?"#6F4CDB":"#ddd"},disabled:!h,children:"로그인"})})]})}),s.jsx(i,{onClick:()=>n("/auth/findid"),children:"아이디 찾기"}),s.jsx(i,{style:{color:"#bababa"},children:"I"}),s.jsx(i,{onClick:()=>n("/auth/findpw"),children:"비밀번호 찾기"}),a===l&&s.jsxs(s.Fragment,{children:[s.jsx(i,{style:{color:"#bababa"},children:"I"}),s.jsx(i,{style:{marginRight:25},onClick:()=>n("/auth/policy"),children:"회원가입"})]})]})}export{ns as default};
