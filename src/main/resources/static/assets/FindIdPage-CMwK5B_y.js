import{u as D,r as I,a as $,j as e}from"./index-DgvhuQLs.js";import{o as C,c as F,a as p}from"./index.esm-B93EDcIm.js";import{a as h}from"./index-CHcUfME0.js";import{u as L}from"./index.esm-ADTgdix5.js";import{I as w}from"./index-Bonc72oP.js";import{L as R}from"./Loading-mi2riH_p.js";import{L as E,H as k,C as B,T,F as U,I as u,S as x,Y as g,a as V}from"./loginStyle-wkVDl0VW.js";import{r as Y,U as q,S as A}from"./roleAtom-JDXEFqt3.js";import"./iconBase-BvS4BhiP.js";import"./emotion-styled.browser.esm-BHLZPLA4.js";import"./animation-DR5N1PjO.js";const H=F({name:p().required("이름은 필수입니다.").min(2,"이름은 최소 2자 이상이어야 합니다."),email:p().required("이메일은 필수입니다.").email("올바른 이메일 형식이 아닙니다.")});function X(){var c,d;const a=D(),[f,r]=I.useState(!1),o=$(Y),{register:t,handleSubmit:j,formState:{errors:n},watch:m}=L({mode:"onChange",resolver:C(H)}),v=async i=>{try{o===q?await h.get(`/api/user/find-id?name=${i.name}&email=${i.email}`):o===A&&await h.get(`/api/admin/find-id?name=${i.name}&email=${i.email}`),alert(`${i.email} 이메일로 아이디가 전송되었습니다.`),a("/auth")}catch(s){alert("이름과 이메일이 일치하지 않습니다."),r(!1),console.log(s)}},S=i=>{console.log(i),r(s=>!s),v(i)},y=m("name"),b=m("email"),l=y&&b;return e.jsxs("div",{children:[e.jsxs(E,{style:{position:"relative"},children:[e.jsx(k,{children:e.jsx(B,{children:e.jsx(w,{style:{width:"100%",height:"100%",cursor:"pointer"},onClick:()=>a(-1)})})}),e.jsx(T,{children:"아이디 찾기"}),e.jsx(U,{children:e.jsxs("form",{onSubmit:j(S),children:[e.jsxs(u,{children:[e.jsx(x,{type:"text",placeholder:"이름",...t("name")}),e.jsx(g,{children:(c=n.name)==null?void 0:c.message})]}),e.jsxs(u,{children:[e.jsx(x,{type:"email",placeholder:"이메일",...t("email")}),e.jsx(g,{children:(d=n.email)==null?void 0:d.message})]}),e.jsx("div",{style:{marginLeft:20,marginRight:20},children:e.jsx(V,{type:"submit",style:{backgroundColor:l?"#6F4CDB":"#ddd"},disabled:!l,children:"확인"})})]})})]}),f&&e.jsx(R,{})]})}export{X as default};
