import{R as i,b as z,A as E,B as R,x as H,r as n,C as L,u as T,g as m,j as s}from"./index-DLHo9G1O.js";import{a as x}from"./index-CHcUfME0.js";import"./lodash-ps-9DWTQ.js";import{I as P,d as U}from"./index-Secm_Y0z.js";import"./iconBase-7BRcTMO3.js";const Q=()=>{const[d,w]=i(z),[h,p]=i(E),[N,f]=i(R),[g,K]=i(H),[u,b]=n.useState(!0),[k,y]=n.useState([]),[o,D]=n.useState(""),{state:O}=L(),I=T(),v=sessionStorage.getItem("userId"),S=m();n.useEffect(()=>{const e={userId:v};(async()=>{try{const r=await x.get("/api/user",{params:e,headers:{Authorization:`Bearer ${S}`}});console.log(r.data.resultData);const a=r.data.resultData;w({...a}),f(c=>{const l=[...c];return l[0]={name:a.name,uid:a.uid,userId:a.userId},l}),p(c=>{const l=c.userId||[],G=l.includes(a.userId);return{...c,userId:G?l.filter($=>$!==a.userId):[...l,a.userId]}})}catch(r){console.log(r)}})()},[]),n.useEffect(()=>{(async(t=o)=>{const r=m(),a={companyId:d.companyId,page:1,size:30,name:t};console.log(a);try{const l=(await x.get("/api/user/user-payment-member/searchPeople",{params:a,headers:{Authorization:`Bearer ${r}`}})).data.resultData.memberList;y([...l])}catch(c){console.log(c)}})()},[o]);const j=async(e=o)=>{const t=m(),r={companyId:d.companyId,page:1,size:30,name:e};console.log(r);try{const c=(await x.get("/api/user/user-payment-member/searchPeople",{params:r,headers:{Authorization:`Bearer ${t}`}})).data.resultData.memberList;y([...c])}catch(a){console.log(a)}},C=e=>{const t=e.target.value;D(t)},M=e=>{console.log(e),console.log(o),e.code==="Enter"&&j()},A=e=>{console.log(e),p(t=>{var a;const r=(a=t.userId)==null?void 0:a.includes(e.userId);return{...t,userId:r?t.userId.filter(c=>c!==e.userId):[...t.userId,e.userId]}}),f(t=>(t==null?void 0:t.some(a=>a.userId===e.userId))?t==null?void 0:t.filter(a=>a.userId!==e.userId):[...t,e])};console.log(h),console.log(N);const B=()=>{I(`/user/placetoorder/price/${g}`,{state:{orderId:g}})};return s.jsxs("div",{className:"w-full h-dvh overflow-x-hidden overflow-y-scroll scrollbar-hide",children:[s.jsxs("div",{className:"flex w-full justify-between py-6 items-center border-b border-gray",children:[s.jsx("div",{onClick:()=>I(-1),className:"flex w-[15%] justify-center",children:s.jsx(P,{className:"text-3xl"})}),s.jsx("span",{className:"text-lg font-semibold",children:"인원 선택"}),s.jsx("div",{className:"w-[15%]",children:s.jsx("span",{className:"bg-primary text-center px-3 py-1 rounded-md text-white",onClick:B,children:"다음"})})]}),s.jsxs("div",{className:"flex w-full justify-between p-4",children:[s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:`${u?"bg-gray text-darkGray text-opacity-60":"bg-darkGray text-black"} px-2 py-1 rounded-s-md font-semibold`,onClick:()=>b(!1),children:"최근"}),s.jsx("span",{className:`${u?"bg-darkGray text-black":"bg-gray text-darkGray text-opacity-60"} px-2 py-1 rounded-e-md font-semibold`,onClick:()=>b(!0),children:"검색"})]}),s.jsxs("div",{children:["총 ",h.userId.length,"명 선택 중"]})]}),s.jsxs("div",{className:"w-full h-dvh ",children:[s.jsxs("div",{className:"flex w-full h-[6%] items-center px-6 border-b border-gray",children:[s.jsxs("div",{className:"flex w-[90%] items-center gap-4",children:[s.jsx("input",{type:"checkbox",className:"w-5 h-5",checked:!0,disabled:!0}),s.jsxs("label",{className:"text-xl",children:[d.name,"(",d.uid,")"]})]}),s.jsx("span",{className:"w-[20%] text-darkGray",children:"필수선택"})]}),u?s.jsxs("div",{className:"flex flex-col w-full h-dvh",children:[s.jsxs("div",{className:"flex p-6 items-center gap-1",children:[s.jsx("input",{type:"text",className:"w-[90%] border border-darkGray rounded-md px-2",placeholder:"회사 내 인원을 이름으로 검색해보세요",onChange:e=>C(e),onKeyDown:e=>M(e),value:o}),s.jsx(U,{onClick:()=>j(),className:"flex w-[10%] text-2xl"})]}),s.jsx("div",{className:"flex flex-col w-full h-dvh",children:k.map(e=>s.jsxs("div",{className:"flex w-full h-[6%] items-center gap-4 px-6 border-b border-gray",children:[s.jsx("input",{type:"checkbox",className:"w-5 h-5",id:e.userId,value:e.userId,onChange:()=>A(e)}),s.jsxs("label",{className:"text-xl",htmlFor:e.userId,children:[e.name,"(",e.uid,")"]})]},e.userId))})]}):s.jsx("div",{className:"flex flex-col w-full h-dvh",children:s.jsx("span",{className:"p-5 text-xl",children:"최근 함께한 사용자가 없습니다"})})]})]})};export{Q as default};
