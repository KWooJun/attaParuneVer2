import{R as o,x as k,u as y,j as s,l as O,g as z,S as u,r as B}from"./index-DLHo9G1O.js";import{a as F}from"./index-CHcUfME0.js";import{f as S}from"./index-qAoN58iZ.js";import{b as T}from"./index-6t7-0j-N.js";import{n as b,p as w,o as C,a as P,i as $}from"./MenuBar-B5mfqGNS.js";const E=()=>{const[f,n]=o(k),[t,d]=o(b),[N,m]=o(w),[h,g]=o(C),[x,i]=o(P),r=y();console.log(t),console.log(N),console.log(h);const I=e=>{r(`/user/placetoorder/member/${e}`,{state:{orderId:e}}),n(e),i(!1)},p=e=>{r(`/user/placetoorder/price/${e}`,{state:{orderId:e}}),n(e),i(!1)};return console.log(t),s.jsxs("div",{className:"absolute right-4 w-[80%] bg-white z-50 top-12 border-2 border-darkGray rounded-md pb-6 overflow-x-hidden over overflow-y-scroll scrollbar-hide",children:[s.jsx("div",{className:"p-5 font-semibold text-darkGray",children:"알림"}),s.jsx("div",{className:"flex flex-col px-5 gap-5 font-medium text-nowrap",children:(t==null?void 0:t.length)>0?t.map(e=>s.jsxs("div",{onClick:()=>{e.message==="나한테 온 승인요청 메세지"?p(e.orderId):I(e.orderId)},className:"flex w-full h-[10%]",children:[e.message," [",e.restaurantName,"]"]},e.orderId)):s.jsx("span",{className:"text-darkGray tracking-wide",children:"새로운 알림이 없습니다"})})]})},M=()=>{const[f,n]=o($),[t,d]=o(b),[N,m]=o(w),[h,g]=o(C),[x,i]=o(P),[r,I]=o(O),p=sessionStorage.getItem("userId"),e=z();o(k);const A=u.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:2e3,timerProgressBar:!0,didOpen:c=>{c.onmouseenter=u.stopTimer,c.onmouseleave=u.resumeTimer}});return B.useEffect(()=>{const c={userId:p};console.log(r),(async()=>{var j,v;if(r===!0)try{const l=await F.get("/api/user/alert",{params:c,headers:{Authorization:`Bearer ${e}`}});console.log(l.data.resultData);const a=l.data.resultData;(j=a[0])!=null&&j.orderId?(d(a),console.log("결제 승인 요청이 왔습니다"),m(!0),A.fire({title:"결제 승인 요청이 왔습니다!",text:"알림 메세지를 확인해주세요",icon:"info",customClass:{popup:"flex w-[90%]",title:"text-2xl"}})):(v=a[1])!=null&&v.orderId?(d(a),g(!0)):a.length===0&&(m(!1),g(!1))}catch(l){console.log(l)}})()},[]),console.log(t),s.jsxs("div",{children:[s.jsx("div",{children:s.jsxs("div",{onClick:()=>i(!x),className:"absolute right-5 top-5 z-50 cursor-pointer",children:[t.length!==0?s.jsx(S,{className:"absolute -right-0 -top-1 text-xs text-red animate-ping"}):s.jsx(s.Fragment,{}),s.jsx(T,{className:`size-6 ${f?"text-white":"text-black"}`})]})}),x?s.jsx(E,{}):s.jsx(s.Fragment,{})]})};export{M as N};
