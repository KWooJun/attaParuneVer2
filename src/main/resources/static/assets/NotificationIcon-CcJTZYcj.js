import{R as t,q as h,u as y,j as e,l as O,S as p,r as z}from"./index-8lJcAOoD.js";import{a as B}from"./index-CHcUfME0.js";import{f as F}from"./index-5ntvYec2.js";import{b as S}from"./index-D9TvFRBQ.js";import{n as I,p as v,o as j,a as b,i as T}from"./MenuBar-BvMYZ1zJ.js";import{g as $}from"./cookie-DPYybHad.js";const E=()=>{t(h);const[a,k]=t(I),[c,m]=t(v),[f,g]=t(j),[w,o]=t(b),r=y();console.log(a),console.log(c),console.log(f);const x=s=>{r(`/user/placetoorder/member/${s}`,{state:{orderId:s}}),o(!1)},l=s=>{r(`/user/placetoorder/price/${s}`,{state:{orderId:s}}),o(!1)};return e.jsxs("div",{className:"absolute right-4 w-[80%] h-[50%] bg-white z-50 top-12 border-2 border-darkGray rounded-md pb-6 overflow-x-hidden over overflow-y-scroll scrollbar-hide",children:[e.jsx("div",{className:"p-5 font-semibold text-darkGray",children:"알림"}),e.jsx("div",{className:"flex flex-col px-5 gap-5 font-medium text-nowrap",children:a.map(s=>e.jsxs("div",{onClick:()=>{s.message==="나한테 온 승인요청 메세지"?l(s.orderId):x(s.orderId)},className:"flex w-full h-[10%]",children:[s.message," [",s.restaurantName,"]"]},s.orderId))})]})},M=()=>{const[a,k]=t(T),[c,m]=t(I),[f,g]=t(v),[w,o]=t(j),[r,x]=t(b),[l,s]=t(O),C=sessionStorage.getItem("userId"),P=$();t(h);const A=p.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:2e3,timerProgressBar:!0,didOpen:n=>{n.onmouseenter=p.stopTimer,n.onmouseleave=p.resumeTimer}});return z.useEffect(()=>{const n={userId:C};console.log(l),(async()=>{var u,N;if(l===!0)try{const d=await B.get("/api/user/alert",{params:n,headers:{Authorization:`Bearer ${P}`}});console.log(d.data.resultData);const i=d.data.resultData;(u=i[0])!=null&&u.orderId?(m(i),console.log("결제 승인 요청이 왔습니다"),g(!0),A.fire({title:"결제 승인 요청이 왔습니다!",text:"알림 메세지를 확인해주세요",icon:"info",customClass:{popup:"flex w-[90%]",title:"text-2xl"}})):(N=i[1])!=null&&N.orderId?(m(i),o(!0)):i.length===0&&(g(!1),o(!1))}catch(d){console.log(d)}})()},[]),console.log(c),e.jsxs("div",{children:[e.jsx("div",{children:e.jsxs("div",{onClick:()=>x(!r),className:"absolute right-5 top-5 z-50",children:[c.length!==0?e.jsx(F,{className:"absolute -right-0 -top-1 text-xs text-red animate-ping"}):e.jsx(e.Fragment,{}),e.jsx(S,{className:`size-6 ${a?"text-white":"text-black"}`})]})}),r?e.jsx(E,{}):e.jsx(e.Fragment,{})]})};export{M as N};
