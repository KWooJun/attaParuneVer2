import{u as B,r as p,a as D,j as e,L as $,S as u}from"./index-8lJcAOoD.js";import{o as k,c as A,a as w,b as F}from"./index.esm-TGsLhwhb.js";import{a as f}from"./index-CHcUfME0.js";import{u as I}from"./index.esm-CSfWQ_HH.js";import{I as L}from"./index-DAM17y8Z.js";import{L as T,H as E,C as R,F as z,T as O,I as h,S as x,Y as g,a as P}from"./loginStyle-kY_aPp4U.js";import{g as V}from"./cookie-DPYybHad.js";import{r as Y,U as q,S as H}from"./roleAtom-B95MwN8V.js";import"./iconBase-DY5zKqN8.js";const Z=A({newUpw:w().required("비밀번호는 필수입니다.").min(8,"최소 8자 이상 작성해야 합니다.").max(16,"최대 16자까지 작성 가능합니다.").matches(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]+$/,"비밀번호는 영어, 숫자, 특수문자만 가능합니다."),pwConfirm:w().required("비밀번호 확인을 입력해주세요.").oneOf([F("newUpw")],"비밀번호가 일치하지 않습니다.")});function ee(){var m,d;const r=B(),[j,C]=p.useState(!1),i=D(Y),{register:a,handleSubmit:S,formState:{errors:n},watch:c}=I({mode:"onChange",resolver:k(Z)}),v=async o=>{try{const s=V();console.log(s),i===q?(await f.put("/api/user/upw",o,{headers:{Authorization:`Bearer ${s}`}}),u.fire({title:"비밀번호가 변경 되었습니다.",icon:"success",confirmButtonText:"확인",showConfirmButton:!0,allowOutsideClick:!1}).then(t=>{t.isConfirmed&&r("/user")})):i===H&&(await f.put("/api/admin/upw",o,{headers:{Authorization:`Bearer ${s}`}}),u.fire({title:"비밀번호가 변경 되었습니다.",icon:"success",confirmButtonText:"확인",showConfirmButton:!0,allowOutsideClick:!1}).then(t=>{t.isConfirmed&&r("/store")}))}catch(s){console.log(s)}},y=o=>{C(s=>!s),v({newUpw:o.newUpw})},U=c("newUpw"),b=c("pwConfirm"),l=U&&b;return p.useEffect(()=>{console.log(i)},[]),e.jsxs("div",{children:[e.jsxs(T,{style:{position:"relative"},children:[e.jsx(E,{children:e.jsx(R,{children:e.jsx(L,{style:{width:"100%",height:"100%",cursor:"pointer"},onClick:()=>r(-1)})})}),e.jsx(z,{children:e.jsxs("form",{onSubmit:S(y),children:[e.jsx(O,{children:"비밀번호 변경"}),e.jsxs(h,{children:[e.jsx(x,{type:"password",placeholder:"새 비밀번호",...a("newUpw")}),e.jsx(g,{children:(m=n.newUpw)==null?void 0:m.message})]}),e.jsxs(h,{children:[e.jsx(x,{type:"password",placeholder:"새 비밀번호 확인",...a("pwConfirm")}),e.jsx(g,{children:(d=n.pwConfirm)==null?void 0:d.message})]}),e.jsx("div",{style:{marginLeft:20,marginRight:20},children:e.jsx(P,{type:"submit",style:{backgroundColor:l?"#6F4CDB":"#ddd"},disabled:!l,children:"확인"})})]})})]}),j&&e.jsx($,{})]})}export{ee as default};
