import{u as B,a as F,r as y,j as e,L as k,S as q}from"./index-DLHo9G1O.js";import{o as A,c as U,a}from"./index.esm-SloHnBlm.js";import{a as E}from"./index-CHcUfME0.js";import{u as R}from"./index.esm-DzBEjBS5.js";import{I as T}from"./index-Secm_Y0z.js";import{r as Y}from"./roleAtom-DmcA2hSe.js";import{L as z,H,C as Z,F as _,T as M,I as l,S as c,Y as m,a as N}from"./loginStyle-DtPLaVfi.js";import"./iconBase-7BRcTMO3.js";const O=U({roleId:a(),id:a().min(6,"최소 6자 이상 작성해야 합니다.").max(12,"최대 12자까지 작성 가능합니다."),pw:a().required("비밀번호는 필수입니다.").min(8,"최소 8자 이상 작성해야 합니다.").max(16,"최대 16자까지 작성 가능합니다.").matches(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]+$/,"비밀번호는 영어, 숫자, 특수문자만 가능합니다."),name:a().required("이름은 필수입니다.").min(2,"이름은 최소 2자 이상이어야 합니다."),email:a().required("이메일은 필수입니다.").email("올바른 이메일 형식이 아닙니다."),phone:a().required("전화번호는 필수입니다.").matches(/^01([0|1|6|7|8|9])-?([0-9]{3,4})-?([0-9]{4})$/,"전화번호 형식이 올바르지 않습니다.")});function se(){var u,x,g,j,f;const d=B(),S=F(Y),[v,w]=y.useState(!1),{register:o,handleSubmit:$,formState:{errors:n},watch:t,setValue:p}=R({mode:"onChange",resolver:A(O),defaultValues:{phone:""}}),C=t("id"),b=t("pw"),D=t("name"),I=t("email"),i=t("phone"),h=C&&b&&D&&I&&i,V=async s=>{try{await E.post("/api/admin/sign-up",s),q.fire({title:"회원가입이 완료 되었습니다.",icon:"success",confirmButtonText:"확인",showConfirmButton:!0,allowOutsideClick:!1}).then(r=>{r.isConfirmed&&d("/auth/signup/emailauth")}),console.log("보낸 데이터??",s)}catch(r){console.log("보낸 데이터??",s),console.log(r)}},L=async s=>{console.log(s),w(r=>!r),s.phone=s.phone.replace(/-/g,""),V(s)};return y.useEffect(()=>{i.length===11&&p("phone",i.replace(/(\d{3})(\d{3})(\d{4})/,"$1-$2-$3")),i.length===13&&p("phone",i.replace(/-/g,"").replace(/(\d{3})(\d{4})(\d{4})/,"$1-$2-$3")),console.log(i)},[i]),e.jsxs("div",{children:[e.jsxs(z,{style:{position:"relative"},children:[e.jsx(H,{children:e.jsx(Z,{children:e.jsx(T,{style:{width:"100%",height:"100%",cursor:"pointer"},onClick:()=>d(-1)})})}),e.jsx(_,{children:e.jsxs("form",{onSubmit:$(L),children:[e.jsx("input",{type:"text",value:S,style:{display:"none"},...o("roleId")}),e.jsx(M,{children:"회원가입"}),e.jsxs(l,{children:[e.jsx(c,{type:"text",placeholder:"아이디",...o("id")}),e.jsx(m,{children:(u=n.id)==null?void 0:u.message})]}),e.jsxs(l,{children:[e.jsx(c,{type:"password",placeholder:"비밀번호 (8-16자)",...o("pw")}),e.jsx(m,{children:(x=n.pw)==null?void 0:x.message})]}),e.jsxs(l,{children:[e.jsx(c,{type:"text",placeholder:"이름",...o("name")}),e.jsx(m,{children:(g=n.name)==null?void 0:g.message})]}),e.jsxs(l,{children:[e.jsx(c,{type:"email",placeholder:"이메일",...o("email")}),e.jsx(m,{children:(j=n.email)==null?void 0:j.message})]}),e.jsxs(l,{children:[e.jsx(c,{type:"tel",placeholder:"휴대전화번호",maxLength:13,...o("phone")}),e.jsx(m,{children:(f=n.phone)==null?void 0:f.message})]}),e.jsx("div",{style:{marginLeft:20,marginRight:20},children:e.jsx(N,{type:"submit",style:{backgroundColor:h?"#6F4CDB":"#ddd"},disabled:!h,children:"가입하기"})})]})})]}),v&&e.jsx(k,{})]})}export{se as default};
