import{r as n,j as e,S as b}from"./index-DgvhuQLs.js";import{S as k}from"./SideBar-DE36Ozw7.js";import{a as p}from"./index-CHcUfME0.js";import{u as I}from"./useModal-CGuKP8PO.js";import{g as S}from"./cookie-BNspsx3t.js";import{d as D}from"./dayjs.min-Ccagk4ZG.js";import"./index-C8lUTx5V.js";import"./iconBase-BvS4BhiP.js";import"./index-CmTjqX1u.js";import"./index-h4UF_XZQ.js";import"./index-BDdqncIb.js";import"./emotion-styled.browser.esm-BHLZPLA4.js";import"./roleAtom-JDXEFqt3.js";import"./index-Bonc72oP.js";const L=()=>{const[m,j]=n.useState([]),[w,f]=n.useState([]),[h,u]=n.useState(!1),s=window.sessionStorage.getItem("restaurantId"),{Modal:d,open:t,close:o,eventData:x}=I({title:"주문 정보를 확인해주세요"});n.useEffect(()=>{(async()=>{const a={restaurantId:s};try{const l=await p.get("/api/order/restaurant/reservation",{params:a}),c=l.data.resultData;console.log(l),console.log(c);const i=c.map(N=>N.orderDetails?N.orderDetails:[]);console.log(i.flat()),j([...c]),f([...i.flat()])}catch(l){console.log(l)}})()},[h]);const g=()=>u(r=>!r),y=async()=>{const r={orderId:x,reservationStatus:1};try{const a=await p.put("/api/order/access",r);console.log(a),b.fire({title:"주문을 승인했습니다!",text:"주문을 확인해주세요.",icon:"success"}),o(),g()}catch(a){console.log(a)}},v=async()=>{const r={orderId:x,reservationStatus:2};try{const a=await p.put("/api/order/access",r);console.log(a),g()}catch(a){console.log(a)}};return e.jsx("div",{className:"flex flex-col w-2/5 h-dvh border-l-2 bg-white border-l-gray shadow-xl",children:e.jsxs("div",{className:"w-100% h-dvh",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex w-100% h-100% flex-col text-center pt-10 text-2xl mb-6 font-semibold",children:"새로운 주문"}),e.jsxs("div",{className:"flex w-full items-center justify-between px-6 py-2 border-b border-gray",children:[e.jsx("span",{className:"flex w-[30%] justify-center text-darkGray",children:"주문번호"}),e.jsx("span",{className:"flex w-[40%] justify-center text-darkGray",children:"메뉴"}),e.jsx("span",{className:"flex w-[30%] justify-center text-darkGray",children:"주문시간"})]})]}),e.jsx("ul",{className:"flex flex-col w-[100%] h-[100%] gap-4 pt-3 text-nowrap",children:m.map((r,a)=>r.length===0?e.jsx("li",{className:"flex w-full items-center justify-between px-6 py-2",children:e.jsx("span",{children:"새로운 주문이 없습니다"})},r):e.jsxs("li",{onClick:()=>t(r.orderId),className:"flex w-full items-center justify-between px-6 py-2 border-b border-gray",children:[e.jsx("span",{className:"flex w-[30%] justify-center text-black",children:r.orderId}),e.jsx("span",{className:"flex w-[30%] justify-center text-black",children:r.orderDetails.map((l,c)=>e.jsx("div",{children:l==null?void 0:l.menuName},c))}),e.jsx("span",{className:"flex w-[30%] justify-center text-black",children:r.orderDetails.map((l,c)=>{var i;return e.jsx("div",{children:(i=l==null?void 0:l.createdAt.split(" "))==null?void 0:i[1].slice(0,5)},c)})})]},a))}),e.jsx(d,{children:e.jsxs("div",{className:"flex flex-col w-full h-full justify-between",children:[e.jsxs("div",{className:"flex flex-col w-full h-[60%] gap-4 pt-10",children:[e.jsxs("div",{className:"flex w-full px-10 gap-3",children:[e.jsx("span",{className:"flex w-[25%]",children:"주문번호"}),e.jsx("span",{children:"12"})]}),e.jsxs("div",{className:"flex w-full px-10 gap-3",children:[e.jsx("span",{className:"flex w-[25%]",children:"주문한 메뉴"}),e.jsx("span",{children:"asd"})]}),e.jsxs("div",{className:"flex w-full px-10 gap-3",children:[e.jsx("span",{className:"flex w-[25%]",children:"주문한 사람"}),e.jsx("span",{children:"asdd"})]}),e.jsxs("div",{className:"flex w-full px-10 gap-3",children:[e.jsx("span",{className:"flex w-[25%]",children:"핸드폰 번호"}),e.jsx("span",{children:"123123123"})]}),e.jsxs("div",{className:"flex w-full h-[20%] px-10 gap-3",children:[e.jsx("span",{className:"flex w-[25%]",children:"인원 수"}),e.jsx("span",{children:"1 명"})]})]}),e.jsxs("div",{className:"flex w-full justify-center gap-10 mb-10",children:[e.jsx("div",{onClick:y,className:"bg-blue px-2 py-1 rounded-md text-nowrap text-white font-medium",children:"주문 승인"}),e.jsx("div",{onClick:v,className:"bg-red px-2 py-1 rounded-md text-nowrap text-white font-medium",children:"주문 취소"})]})]})})]})})},O=()=>{const[m,j]=n.useState(!0),[w,f]=n.useState([]),h=sessionStorage.getItem("restaurantId"),u=S();return n.useEffect(()=>{const s={restaurantId:h};(async()=>{try{const t=await p.get("/api/order/restaurant",{params:s,headers:{Authorization:`Bearer ${u}`}});console.log(t.data.resultData);const o=t.data.resultData,x=o[1].orderDetails;console.log(x),f([...o])}catch(t){console.log(t)}})()},[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full h-full bg-gray",children:e.jsx("div",{className:"w-100% h-[calc(100%_-_4rem)] mx-4 my-8 bg-white rounded-lg overflow-hidden overflow-y-scroll scrollbar-hide",children:e.jsx("div",{className:"flex flex-wrap ml-5 mt-5 gap-4 bg-white justify-start",children:w.map((s,d)=>{var t;return e.jsxs("div",{className:`${m?"w-[calc(33%_-_1rem)]":"w-[calc(25%_-_1rem)]"} min-w-40 h-48 border-2 border-darkGray bg-white cursor-pointer`,children:[e.jsxs("div",{className:" px-4 py-1 bg-third",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("span",{className:"text-sm",children:"주문번호"}),e.jsx("span",{className:"text-xl",children:s.orderId})]}),e.jsx("span",{className:"font-semibold",children:s==null?void 0:s.userPhone})]}),e.jsxs("div",{className:"flex gap-2 tracking-wider items-center",children:[e.jsx("span",{className:"text-sm",children:"주문시간"}),e.jsxs("span",{className:"text-md",children:[D(s.reservationTime).format("HH:MM")," ~"]})]})]}),e.jsxs("div",{className:"px-3 py-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:(t=s[d])==null?void 0:t.orderDeatils}),e.jsxs("span",{children:["x",s.menuQuntity]})]}),e.jsx("div",{className:"pt-1 pl-6 text-darkGray",children:s.menuInfo})]})]},s.orderId)})})})}),e.jsx(L,{})]})},Q=()=>e.jsxs("div",{className:"flex w-full h-dvh overflow-hidden scrollbar-hide justify-between",children:[e.jsx(k,{}),e.jsx(O,{})]});export{Q as default};
