import{u as F,a as q,r as y,j as e}from"./index-DgvhuQLs.js";import{o as A,c as U,a}from"./index.esm-B93EDcIm.js";import{a as k}from"./index-CHcUfME0.js";import{u as B}from"./index.esm-ADTgdix5.js";import{I as E}from"./index-Bonc72oP.js";import{r as R}from"./roleAtom-JDXEFqt3.js";import{L as Y}from"./Loading-mi2riH_p.js";import{L as z,H,C as T,F as Z,T as _,I as n,S as l,Y as c,a as M}from"./loginStyle-wkVDl0VW.js";import"./iconBase-BvS4BhiP.js";import"./emotion-styled.browser.esm-BHLZPLA4.js";import"./animation-DR5N1PjO.js";const N=U({roleId:a(),id:a().min(6,"최소 6자 이상 작성해야 합니다.").max(12,"최대 12자까지 작성 가능합니다."),pw:a().required("비밀번호는 필수입니다.").min(8,"최소 8자 이상 작성해야 합니다.").max(16,"최대 16자까지 작성 가능합니다.").matches(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]+$/,"비밀번호는 영어, 숫자, 특수문자만 가능합니다."),name:a().required("이름은 필수입니다.").min(2,"이름은 최소 2자 이상이어야 합니다."),email:a().required("이메일은 필수입니다.").email("올바른 이메일 형식이 아닙니다."),phone:a().required("전화번호는 필수입니다.").matches(/^01([0|1|6|7|8|9])-?([0-9]{3,4})-?([0-9]{4})$/,"전화번호 형식이 올바르지 않습니다.")});function ie(){var x,u,g,j,f;const p=F(),v=q(R),[S,$]=y.useState(!1),{register:i,handleSubmit:w,formState:{errors:r},watch:t,setValue:d}=B({mode:"onChange",resolver:A(N),defaultValues:{phone:""}}),b=t("id"),D=t("pw"),I=t("name"),V=t("email"),o=t("phone"),h=b&&D&&I&&V&&o,L=async s=>{try{await k.post("/api/admin/sign-up",s),alert("회원가입이 완료 되었습니다."),console.log("보낸 데이터??",s),p("/auth/signup/emailauth")}catch(m){console.log("보낸 데이터??",s),console.log(m)}},C=async s=>{console.log(s),$(m=>!m),s.phone=s.phone.replace(/-/g,""),L(s)};return y.useEffect(()=>{o.length===11&&d("phone",o.replace(/(\d{3})(\d{3})(\d{4})/,"$1-$2-$3")),o.length===13&&d("phone",o.replace(/-/g,"").replace(/(\d{3})(\d{4})(\d{4})/,"$1-$2-$3")),console.log(o)},[o]),e.jsxs("div",{children:[e.jsxs(z,{style:{position:"relative"},children:[e.jsx(H,{children:e.jsx(T,{children:e.jsx(E,{style:{width:"100%",height:"100%",cursor:"pointer"},onClick:()=>p(-1)})})}),e.jsx(Z,{children:e.jsxs("form",{onSubmit:w(C),children:[e.jsx("input",{type:"text",value:v,style:{display:"none"},...i("roleId")}),e.jsx(_,{children:"회원가입"}),e.jsxs(n,{children:[e.jsx(l,{type:"text",placeholder:"아이디",...i("id")}),e.jsx(c,{children:(x=r.id)==null?void 0:x.message})]}),e.jsxs(n,{children:[e.jsx(l,{type:"password",placeholder:"비밀번호 (8-16자)",...i("pw")}),e.jsx(c,{children:(u=r.pw)==null?void 0:u.message})]}),e.jsxs(n,{children:[e.jsx(l,{type:"text",placeholder:"이름",...i("name")}),e.jsx(c,{children:(g=r.name)==null?void 0:g.message})]}),e.jsxs(n,{children:[e.jsx(l,{type:"email",placeholder:"이메일",...i("email")}),e.jsx(c,{children:(j=r.email)==null?void 0:j.message})]}),e.jsxs(n,{children:[e.jsx(l,{type:"tel",placeholder:"휴대전화번호",maxLength:13,...i("phone")}),e.jsx(c,{children:(f=r.phone)==null?void 0:f.message})]}),e.jsx("div",{style:{marginLeft:20,marginRight:20},children:e.jsx(M,{type:"submit",style:{backgroundColor:h?"#6F4CDB":"#ddd"},disabled:!h,children:"가입하기"})})]})})]}),S&&e.jsx(Y,{})]})}export{ie as default};
