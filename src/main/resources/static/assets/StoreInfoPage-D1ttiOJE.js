import{r as n,j as e}from"./index-DgvhuQLs.js";import{S as C}from"./SideBar-DE36Ozw7.js";import{a as A}from"./index-CHcUfME0.js";import{o as $,c as L,d as f,a as c}from"./index.esm-B93EDcIm.js";import{u as M}from"./index.esm-ADTgdix5.js";import{h as P}from"./index.esm-D0W_YgrV.js";import{G as z}from"./iconBase-BvS4BhiP.js";import{a as D}from"./index-CmTjqX1u.js";import{u as E}from"./useModal-CGuKP8PO.js";import"./index-C8lUTx5V.js";import"./index-h4UF_XZQ.js";import"./index-BDdqncIb.js";import"./emotion-styled.browser.esm-BHLZPLA4.js";import"./roleAtom-JDXEFqt3.js";import"./cookie-BNspsx3t.js";import"./index-Bonc72oP.js";function H(s){return z({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",strokeWidth:"2",d:"M1,17 L1,23 L23,23 L23,17 M12,2 L12,19 M5,9 L12,2 L19,9"},child:[]}]})(s)}const q=L({restaurantName:c().required("매장명은 필수입력 항목입니다"),restaurantAddress:c().required("매장주소는 필수입력 항목입니다"),restaurantNumber:c().matches(/^\d{2,3}?\d{3,4}?\d{4}$/,"전화번호는 00(0)-000(0)-0000 형식으로 입력해주세요(- 제외)").required("전화번호는 필수입력 항목입니다"),filePath:f().test("required","1개 이상의 파일을 업로드 해주세요",s=>s&&s.length>0).test("filesize","파일 크기는 2MB 이하만 가능합니다.",s=>s&&Array.from(s).every(d=>{d.size<=2*1024*1024})).test("fileCount","최대 6개의 파일만 업로드 가능합니다",s=>s&&s.length<=6),previewlist:f().test("required","미리보기 할 이미지를 업로드 해주세요",s=>s&&s.length>0).test("fileCount","최대 3개의 이미지만 업로드 가능합니다",s=>s&&s.length<=3).test("fileType","JPG 또는 PNG 파일만 업로드 가능합니다.",s=>s&&Array.from(s).every(d=>["image/jpeg","image/png"].includes(d.type))).test("filesize","파일 크기는 2MB 이하만 가능합니다.",s=>s&&Array.from(s).every(d=>d.size<=2*1024*1024))}),R=()=>{var p;const[s,d]=n.useState([]),[m,h]=n.useState([]),[B,U]=n.useState(!1),[o,g]=n.useState({}),[j,_]=n.useState({restaurantId:0,restaurantName:"",restaurantAddress:"",restaurantNumber:"",operatingHours:"",restaurantDescription:"",status:0,maxCapacity:0,lat:0,lng:0,filePath:[]}),{Modal:N,open:x,close:b}=E({title:"주소검색"}),{register:l,handleSubmit:y,setValue:w,trigger:u,formState:{errors:v}}=M({resolver:$(q),defaultValues:{restaurantId:0,restaurantName:"",restaurantAddress:"",restaurantNumber:"",operatingHours:"",restaurantDescription:"",status:0,maxCapacity:0,lat:0,lng:0,filePath:[]},mode:"onChange"});n.useEffect(()=>{u()},[u]),n.useEffect(()=>{w("restaurantNumber",j.restaurantNumber.replace(/[^0-9]/g,"").replace(/^(\d{0,3})(\d{0,4})(\d{0,4})$/g,"$1-$2-$3").replace(/(-{1,2})$/g,""))},[]);const k=r=>{console.log(r)};n.useEffect(()=>{(async()=>{try{const a={restaurantId:1},t=await A.get("/api/restaurant",{params:a});console.log(t),console.log(t.data.resultData)}catch(a){console.log(a)}})()},[]);const F=r=>{const a=r.target.files;console.log(a);const t=[...a];d([...t]);const i=t.map(S=>URL.createObjectURL(S));h([...i])};console.log(m),console.log(s);const G=r=>{console.log(r.value)},I=r=>{let a=r.address,t="";const i=r.zonecode;r.addressType==="R"&&(r.bname!==""&&(t+=r.bname),r.buildingName!==""&&(t+=t!==""?`, ${r.buildingName}`:r.buildingName),a+=t!==""?` (${t})`:""),b(),g({fullAddress:a,zoneCode:i}),console.log(a)};return e.jsx("div",{className:"flex w-[calc(100%_-_11rem)] h-full bg-gray justify-center items-center",children:e.jsx("div",{className:"flex w-[96.5%] h-[calc(100%_-_4rem)] bg-white rounded-lg overflow-hidden overflow-y-scroll scrollbar-hide",children:e.jsxs("div",{className:"flex flex-col w-full h-full p-6 gap-6",children:[e.jsxs("form",{onSubmit:y(k),children:[e.jsx("span",{children:"프로필 사진"}),e.jsxs("div",{className:"flex w-full h-[25%] gap-2",children:[e.jsxs("label",{htmlFor:"inputImg",className:"flex flex-col w-32 h-32 border border-darkGray items-center justify-center gap-2",children:[e.jsx(H,{className:"w-6 h-6"}),e.jsx("span",{className:"text-lg",children:"이미지 업로드"}),e.jsx("span",{className:"text-sm",children:"최대 6개까지"})]}),e.jsx("input",{type:"file",id:"inputImg",multiple:!0,onChange:r=>F(r),className:"hidden"}),e.jsx("div",{className:"flex w-[90%] gap-2 justify-start",children:m.map((r,a)=>e.jsxs("div",{className:"relative",children:[e.jsx(D,{className:"absolute flex p-1 text-3xl right-0.5 text-black",onClick:t=>G(t)}),e.jsx("img",{src:r,alt:"",className:"border border-darkGray w-32 h-32"})]},a))})]})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("span",{className:"text-darkGray",children:"가게 이름"}),e.jsx("input",{type:"text",className:"border px-2 rounded-md",...l("restaurantName")})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("span",{className:"text-darkGray",children:"가게 설명"}),e.jsx("input",{type:"text",className:"border px-2 rounded-md",...l("restaurantDescription")})]}),e.jsxs("div",{className:"flex flex-col w-full gap-2",children:[e.jsxs("div",{className:"flex w-[50%] h-10 gap-2 items-center",children:[e.jsx("label",{htmlFor:"",className:"text-darkGray",children:"우편 번호"}),e.jsx("input",{type:"text",className:"w-[25%] border rounded-md px-2",value:o?o.zoneCode:"",placeholder:"00000"}),e.jsx("button",{className:"px-2 py-1 border rounded-md",onClick:()=>x(),children:"주소확인"})]}),x?e.jsx(N,{children:e.jsx(P,{onComplete:r=>I(r)})}):e.jsx(e.Fragment,{}),e.jsxs("div",{className:"flex w-[45%] gap-2",children:[e.jsx("label",{htmlFor:"",className:"w-[15%] text-nowrap text-darkGray",children:"기본 주소"}),e.jsx("input",{type:"text",className:"w-full border rounded-md px-2 truncate",value:o?o.fullAddress:"",...l("restaurantAddress")})]}),e.jsxs("div",{className:"flex w-[45%] gap-2",children:[e.jsx("label",{htmlFor:"",className:"w-[15%] text-nowrap text-darkGray",children:"상세 주소"}),e.jsx("input",{type:"text",className:"w-full border rounded-md px-2 truncate"})]})]}),e.jsxs("div",{className:"flex flex-col w-[45%] gap-2",children:[e.jsx("label",{htmlFor:"",className:"w-[15%] text-nowrap text-darkGray",children:"전화 번호"}),e.jsx("input",{type:"tel",className:"border px-2 rounded-md",placeholder:"00(0)-000(0)-0000",...l("restaurantNumber")}),e.jsx("p",{className:"text-red",children:(p=v.restaurantNumber)==null?void 0:p.message})]}),e.jsxs("div",{className:"flex flex-col w-[45%] gap-2",children:[e.jsx("label",{htmlFor:"",className:"w-[15%] text-nowrap text-darkGray",children:"영업 시간"}),e.jsx("input",{type:"time",className:"w-[30%] border px-2 rounded-md",step:"1800"})]}),e.jsxs("fieldset",{className:"flex w-[45%] gap-6",children:[e.jsx("legend",{htmlFor:"",className:"w-[15%] text-nowrap text-darkGray",children:"영업 상태"}),e.jsxs("div",{className:"flex gap-1.5",children:[e.jsx("input",{type:"radio",className:"border px-2 rounded-md",...l("status")}),e.jsx("label",{htmlFor:"",children:"영업중"})]}),e.jsxs("div",{className:"flex gap-1.5",children:[e.jsx("input",{type:"radio",className:"border px-2 rounded-md",...l("status")}),e.jsx("label",{htmlFor:"",children:"브레이크타임"})]}),e.jsxs("div",{className:"flex gap-1.5",children:[e.jsx("input",{type:"radio",className:"border px-2 rounded-md",...l("status")}),e.jsx("label",{htmlFor:"",children:"영업종료"})]})]}),e.jsxs("div",{className:"flex flex-col w-[45%] gap-2",children:[e.jsx("label",{htmlFor:"",className:"w-[20%] text-nowrap text-darkGray",children:"최대 수용인원"}),e.jsxs("div",{className:"flex gap-1 items-center",children:[e.jsx("input",{type:"number",className:"border px-2 rounded-md w-[15%] text-end",...l("maxCapacity")}),e.jsx("span",{children:"명"})]})]})]})})})},ne=()=>e.jsxs("div",{className:"flex w-full h-dvh overflow-hidden scrollbar-hide justify-between",children:[e.jsx(C,{}),e.jsx(R,{})]});export{ne as default};
