import{u as U,r as l,a as b,j as e}from"./index-DgvhuQLs.js";import{o as D,c as $,a as d,b as A}from"./index.esm-B93EDcIm.js";import{a as u}from"./index-CHcUfME0.js";import{u as F}from"./index.esm-ADTgdix5.js";import{I}from"./index-Bonc72oP.js";import{L}from"./Loading-mi2riH_p.js";import{L as k,H as B,C as E,F as R,T as z,I as w,S as h,Y as f,a as P}from"./loginStyle-wkVDl0VW.js";import{g as T}from"./cookie-BNspsx3t.js";import{r as V,U as Y,S as q}from"./roleAtom-JDXEFqt3.js";import"./iconBase-BvS4BhiP.js";import"./emotion-styled.browser.esm-BHLZPLA4.js";import"./animation-DR5N1PjO.js";const H=$({newUpw:d().required("비밀번호는 필수입니다.").min(8,"최소 8자 이상 작성해야 합니다.").max(16,"최대 16자까지 작성 가능합니다.").matches(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]+$/,"비밀번호는 영어, 숫자, 특수문자만 가능합니다."),pwConfirm:d().required("비밀번호 확인을 입력해주세요.").oneOf([A("newUpw")],"비밀번호가 일치하지 않습니다.")});function se(){var m,p;const o=U(),[x,g]=l.useState(!1),a=b(V),{register:i,handleSubmit:j,formState:{errors:t},watch:n}=F({mode:"onChange",resolver:D(H)}),v=async r=>{try{const s=T();console.log(s),a===Y?(await u.put("/api/user/upw",r,{headers:{Authorization:`Bearer ${s}`}}),alert("비밀번호가 변경 되었습니다."),o("/user")):a===q&&(await u.put("/api/admin/upw",r,{headers:{Authorization:`Bearer ${s}`}}),alert("비밀번호가 변경 되었습니다."),o("/store"))}catch(s){console.log(s)}},S=r=>{g(s=>!s),v({newUpw:r.newUpw})},C=n("newUpw"),y=n("pwConfirm"),c=C&&y;return l.useEffect(()=>{console.log(a)},[]),e.jsxs("div",{children:[e.jsxs(k,{style:{position:"relative"},children:[e.jsx(B,{children:e.jsx(E,{children:e.jsx(I,{style:{width:"100%",height:"100%",cursor:"pointer"},onClick:()=>o(-1)})})}),e.jsx(R,{children:e.jsxs("form",{onSubmit:j(S),children:[e.jsx(z,{children:"비밀번호 변경"}),e.jsxs(w,{children:[e.jsx(h,{type:"password",placeholder:"새 비밀번호",...i("newUpw")}),e.jsx(f,{children:(m=t.newUpw)==null?void 0:m.message})]}),e.jsxs(w,{children:[e.jsx(h,{type:"password",placeholder:"새 비밀번호 확인",...i("pwConfirm")}),e.jsx(f,{children:(p=t.pwConfirm)==null?void 0:p.message})]}),e.jsx("div",{style:{marginLeft:20,marginRight:20},children:e.jsx(P,{type:"submit",style:{backgroundColor:c?"#6F4CDB":"#ddd"},disabled:!c,children:"확인"})})]})})]}),x&&e.jsx(L,{})]})}export{se as default};
